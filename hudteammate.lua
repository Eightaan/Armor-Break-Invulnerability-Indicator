function HUDTeammate:animate_invulnerability(duration)
  self._radial_health_panel:child("radial_custom"):animate(function (o)
    o:set_color(Color(1, 1, 1, 1))
    o:set_visible(true)
	local total_time = duration + 13
    over(total_time, function (p)
      o:set_color(Color(1, 1 - p, 1, 1))
	  o:set_visible(not managers.player:player_unit():character_damage().swansong)
    end)
    o:set_visible(false)
  end)
end